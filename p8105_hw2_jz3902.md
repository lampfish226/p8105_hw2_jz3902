p8105_hw2_jz3902
================
Jinghan Zhao
2024-09-27

## Problem 1

### Import and clean the data

The original dataset contains variables including: division, line,
station name, station latitude / longitude, routes served, entrance
type, entry, vending, staff and staff hours, ADA compliance and notes,
free crossover, north south / east west street, corner, entrance
latitude / longitude, station location and entrance location.

Data cleaning steps: clean variable names -\> select variables in
interest -\> convert the `entry` variable from character to a logical
variable by `case_match()`.

``` r
transit_df = 
  read_csv("HW2_data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line:entry, vending, ada) %>% 
  mutate(
    entry = case_match(
      entry,
      "YES" ~ TRUE,
      "NO" ~ FALSE
    )
  )
```

The resulting dataset has 1868 rows and 19 columns, which contains
variables including: line, station name, station latitude / longitude,
routes served, entrance type, entry, vending and ADA compliance.

### Distinct stations

Distinct stations are defined by line and station name.

``` r
transit_df %>% 
  distinct(line, station_name) %>% 
  nrow()
```

    ## [1] 465

There are 465 distinct stations.

### ADA compliant

``` r
transit_df %>%
  filter(ada == TRUE) %>% 
  nrow()
```

    ## [1] 468

There are 468 ADA compliant stations.

### Vending

Calculate the numerator (allow entrance + no vending) and denominator
(no vending) respectively, then calculate the proportion.

``` r
no_vending = 
  transit_df %>%
  filter(vending == "NO") %>% 
  nrow()

entry_no_vending = 
  transit_df %>%
  filter(vending == "NO", entry == TRUE) %>% 
  nrow()

propo_vending = entry_no_vending / no_vending
```

There are 37.704918% of stations without vending allow entrance.

### Display routes

The original variable type of `route1:route7` are character, yet
`route8:route11` are numeric, so they cannot combine together.
Therefore, I convert `route8:route11` to character first, then do
`pivot_longer()`.

``` r
transit_tidy_df =
  transit_df %>% 
  mutate(
    across(route8:route11, as.character)
  ) %>% 
  pivot_longer(
    cols = route1:route11,
    names_to = "route_number",
    values_to = "route_name",
    values_drop_na = TRUE)
```

Answering questions:

``` r
transit_tidy_df %>% 
  filter(route_name == "A") %>% 
  distinct(line, station_name) %>% 
  nrow()
```

    ## [1] 60

``` r
transit_tidy_df %>% 
  filter(route_name == "A", ada == TRUE) %>% 
  nrow()
```

    ## [1] 107

There are 60 distinct stations serve the A train.

There are 107 ADA compliant stations that serve the A train.
